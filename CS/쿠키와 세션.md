---
layout: post
title: "쿠키와 세션"
date: yyyy-mm-dd hh:mm:ss -0500
categories: [CS]
---
## 쿠키란??

-   클라이언트 로컬에 저장되는 키와 값이 들어있는 파일이다.
-   이름, 값, 유효시간, 경로 등을 포함한다.
-   클라이언트의 상태 정보를 브라우저에 저장하여 참조한다.
-   유효시간 내에서는 브라우저가 종료 되어도 계속 유지된다.
-   사용자가 따로 작업을 하지 않아고 브라우저가 쿠키를 header에 담아서 서버에 전송.

### 쿠키의 동작 방식

1.  서버가 클라이언트로부터 요청을 받았을 때, 클라이언트에 관한 정보를 토대로 쿠키를 생성한다.
    
2.  서버는 클라이언트에게 보내는 응답의 header에 쿠키를 담아 전송한다.
    
3.  클라이언트가 응답을 받으면, 브라우저는 쿠키를 쿠키 디렉터리에 저장한다.
    
4.  다음 요청부터는 브라우저가 쿠키를 header에 담아서 요청한다.
    
5.  서버는 header에 담긴 쿠키의 정보를 참조하여 응답한다.  
    (ex. 클라이언트로 부터 받은 쿠키에는 이전에 로그인을 했고, 팝업창 오늘은 더이상 보지않음 등을 누른 상태들이 저장되어져있다.  
    서버 : '아 아까 로그인했구나?', '아 팝업창 안 본다고 했지?' 등등)
    

![](https://velog.velcdn.com/images/lkdfj6/post/badc0287-3fba-4a1f-b3a6-d30354718dba/image.png)

## 세션이란??

-   일정 시간 동안 같은 브라우저로부터 들어오는 요청을 하나의 상태로 보고 그 상태를 유지하는 기술이다.
-   기본적으로 쿠키를 이용하여 구현.
-   클라이언트를 구분하기 위해 각 클라이언트에게 session ID를 부여하고 클라이언트는 쿠키 저장소에 session ID를 저장해 둔다.
-   로컬에 저장하는 쿠키와 달리 세션은 서버측에 저장하여 관리한다.
-   유효시간을 두어 일정 시간 응답이 없다면 끊을 수 있고, 또한 브라우저가 종료 되면 유효시간이 남아있더라도 삭제된다.
-   사용자 정보를 서버에 두기 떄문에 쿠키보다 보안은 좋지만 서버 자원을 차지하기 때문에 서버의 성능 저하의 요인이 될 수 있다.

![](https://velog.velcdn.com/images/lkdfj6/post/10a8e30d-6274-46b6-bbf0-08ba5cc7b422/image.png)

> **쿠키와 세션을 사용하는 이유**

HTTP의 connectionless와 stateless라는 특성 때문에 사용한다.  
클라이언트가 요청을 했을때 그 요청에 맞는 응답을 보낸 후 연결을 끊고, 서버는 클라이언트에 대한 상태 정보를 유지하지 않기 때문에 알 수 없게된다.  
만약 쿠키와 세션을 사용하지 않는다면 웹사이트에 로그인을 했음에도 페이지를 이동할 때마다 계속 로그인을 해야한다.

> **세션이 보안이 좋은데도 쿠키를 사용하는 이유는??**

세션은 서버의 자원을 사용하기 때문에 서버가 느려질 수 있고 서버 자원이 부족할 수 있다. 따라서 쿠키를 사용하면 서버 자원의 낭비를 방지하여 웹사이트 속도를 높일 수 있기 때문에 쿠키를 사용한다.

> **한 눈에 확인하는 쿠키와 세션의 차이**

-   저장 위치  
    쿠키 : 클라이언트  
    세션 : 서버
-   보안  
    쿠키 : 클라이언트에 저장되므로 보안에 취약  
    세션 : 쿠키를 이용해 Session ID만 저장하고 이 값으로 구분해서 서버에서 처리하므로 비교적 보안성이 좋다.
-   라이프사이클  
    쿠키 : 만료시간에 따라 브라우저를 종료해도 계속해서 남아 있을 수 있다.  
    세션 : 만료시간을 정할 수 있지만 브라우저가 종료되면 만료시간에 상관없이 삭제.
-   속도  
    쿠키 : 클라이언트에 저장되어서 서버에 요청시 빠르다  
    세션 : 실제 저장된 정보가 서버에 있으므로 서버의 처리가 필요해 쿠키보다 느리다.